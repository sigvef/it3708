\documentclass[a4paper]{article}

\usepackage[utf8]{inputenc}
\usepackage{fancyhdr}
\usepackage{float}
\usepackage{graphicx}
\usepackage{varioref}
\usepackage{url}
\usepackage[margin=1em]{subfig}
\usepackage{pgfplots}
\usepackage{tikz}
\usetikzlibrary{arrows}
\usetikzlibrary{positioning}
\pagestyle{fancy}
\graphicspath{{img/}}
\renewcommand\thepart{\Alph{part}}
\pgfplotsset{compat=1.5}

\newcommand\TODO[1]{\textcolor{red}{TODO:#1}}
\newcommand\todo[1]{\TODO{#1}}

\title{Homework Module: A Controller for Swarm Behaviour in Webots}

\lhead{Homework Module \#1}
\rhead{IT3708 - Subsymbolic Methods in AI}

\author{
    Aleksander Burkow \\
    Sigve Sebstian Farstad \\
    Emil Gr√∏nnbeck
}

\begin{document}

\maketitle
\thispagestyle{empty}

\abstract{
This report presents a solution for Homework Module \#1 of IT3708, spring 2014 at NTNU.
The purpose of the homework module is to ``understand swarm behaviour by implementing a controller for box pushing task in Webots''.~\cite{assignment}
}

\newpage

\setcounter{page}{1}

\part{Introduction}

\section{Brooks Architecture}
The implemented system is based on an AI concept called subsumption architecture.
Subsumption architecture was first described by Rodney Brooks in 1986~\cite{brooks}.
The idea behind subsumption architecture came from insects.
Insects though with relatively little computational power, is able to walk, avoid obstacles, and make desicions faster than any robot created.
The architecture is divided into layers called: "the levels of competence".
Each layer is  independent of each other, where the higher levels are capable of overriding the lower.~\cite{mwarnerwu}
The highest stimulated behaviour is acted upon ~\cite{berg-karud}.

\section{Webots}
\section{The Epuck}

\begin{figure}[H]
\centering
\includegraphics[scale=0.2]{e-puck_sensors_and_leds.png}
\caption{E-puck robot with all sensors}
\end{figure}

\part{The Proposed System}

\section{Description}

The initial proposed system is based on the subsumption approach suggested in \cite{assignment}.
The "levels of competence" are divided into six independent behaviours: Wander, Avoid obstacles, Converge, Retrieve, and Reposition.
The lower levels have a higher priority and are able to override the higher ones.
Figure \vref{figure:subsumption} shows the subsumption hierarchy.

\input{subsumption.tex}

\subsection{Behaviours}

Each of the behaviours of the proposed system are described in detail here.

\subsubsection{Wander}
Wander is the default behaviour.
It tells the robot to move straight forward as fast as possible, regardless of input.

\subsubsection{Avoid obstacles}
This behaviour is intended to save the agent from harmful collisions.
It is triggered when the epucks proximity sensors rise above a certain threshold, indicating that it's close to or about to hit a wall.
The rotational angle of the robot is then set proportional to the difference between the amount of obstacles on either side of the robot.
The closer the wall is on the right side, the harder the epuck will turn to the left, and vice versa.
This technique is called Braitenberg avoidance~\cite{braitenberg}.

\subsubsection{Converge}
This behaviour is intended to let agents converge on a food location.
It is triggered when the sum of the epucks light sensors rise above a certain threshold, indicating that food is nearby.
The rotational angle of the robot is set in proportion to the amount of light on either side, making the robot heads towards the food, aligning it with the surface normal of the food for maximum force.

\subsubsection{Retrieve}
This behaviour is intended to let agents push food to a goal area, and is triggered when the agent detects that food is right in front of it.
It will try to align the robot with the surface-normal of the object, such that maximum force will be exerted upon it.

It subsumes the obstacle avoidance behaviour, letting the agent push the food.

\subsubsection{Reposition}
This behaviour is intended to let agents to move out of potentially poor retrieval positions.
It is enabled when the agent has found food, and is trying to bring it home.

A problem that commonly occurs is that the agents are trying to push the food from opposing sides, and therefore getting nowhere.
The reposition behaviour simply says that after $ N $ seconds of retrieval, the agent will try to push somewhere else nearby.

This exponential backoff-inspired behaviour allows the agents to reposition themselves reasonably efficiently.

\section{Simulation Results}
\begin{table}[H]
\centering
\begin{tabular}{ c | c | p{5cm}}
\hline No & Time & Notes \\ \hline
 1 & 42:56 &  \\ \hline
 2 & 38:21 & \\ \hline
 3 & 33:54 & Close to optimal run \\ \hline
4 & - & Two robots got stuck between the box and the wall. Therefore the robots was not able to finish the objective \\ \hline
5 & 36:35 & \\ \hline
6	& 52:13 & The robots did change pushing direction in the middle of the simulation \\ \hline
7 & 59:81 & \\ \hline
8 & 52:83 & \\ \hline
9 & 3:32:01 &  The robots divided into two groups and pushed from opposite sides \\ \hline
10 & 1:42:84 & The robots divided into two groups and pushed from oppsite sides, though the stagnation got solved earlier than simulation 9 \\
\end{tabular}
\caption{One box problem runs}
\end{table}


\begin{table}
\centering
\begin{tabular}{ l | r}
\hline Number of runs & Avg. Time \\ \hline
9 & ?:??:?? \\
\end{tabular}
\caption{ Average time of One box problem runs}
\end{table}


\subsection{Observed weaknesses}
\part{An Improved System}

\section{Description}



\section{Simulation Results}
\part{A More Advanced Architecture}

\section{Description}
\newpage
\section{Simulation Results}
\begin{table}[H]
\centering
\begin{tabular}{ c | c | p{5cm}}
\hline No & Time & Notes \\ \hline

1 & 5:01:96 & The robots were trying to push a box that allready was retrieved \\ \hline
2 & 2:38:43 & \\ \hline
3 & 5:20:45 & Same as simulation number 1 \\ \hline
4


\end{tabular}
\end{table}

\input{measurements/histogram.tex}


\newpage
\part{Appendix}
\begin{figure}[H]
\centering
\includegraphics[scale=0.5]{one-box-world.png}
\caption{World used in the simulation for Table 1}
\end{figure}

\input{subsumption2.tex}

\bibliography{reference-library}
\bibliographystyle{plain}
\nocite{*}

\end{document}
